<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.8">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Matti Vuorre">
<meta name="dcterms.date" content="2024-08-29">
<meta name="keywords" content="Quarto, Typst, preprints, communication, typesetting, tools">

<title>quarto-preprint: A Quarto Typst extension for efficient typesetting of computationally reproducible manuscripts</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-79bb3942e891885f9f7af119cd221462.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-1336af542e941ddb4d74cee0382b4daa.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#preface" id="toc-preface" class="nav-link active" data-scroll-target="#preface">Preface</a>
  <ul class="collapse">
  <li><a href="#a-quarto-example" id="toc-a-quarto-example" class="nav-link" data-scroll-target="#a-quarto-example">A Quarto example</a></li>
  </ul></li>
  <li><a href="#quarto-preprint-manual" id="toc-quarto-preprint-manual" class="nav-link" data-scroll-target="#quarto-preprint-manual"><em>quarto-preprint</em> manual</a>
  <ul class="collapse">
  <li><a href="#common-quarto-options" id="toc-common-quarto-options" class="nav-link" data-scroll-target="#common-quarto-options">Common Quarto options</a>
  <ul class="collapse">
  <li><a href="#title" id="toc-title" class="nav-link" data-scroll-target="#title">Title</a></li>
  <li><a href="#authors-affiliations" id="toc-authors-affiliations" class="nav-link" data-scroll-target="#authors-affiliations">Authors &amp; affiliations</a></li>
  <li><a href="#abstract-keywords-date" id="toc-abstract-keywords-date" class="nav-link" data-scroll-target="#abstract-keywords-date">Abstract, keywords, &amp; date</a></li>
  <li><a href="#citation-information" id="toc-citation-information" class="nav-link" data-scroll-target="#citation-information">Citation information</a></li>
  <li><a href="#other-common-options" id="toc-other-common-options" class="nav-link" data-scroll-target="#other-common-options">Other common options</a></li>
  <li><a href="#format" id="toc-format" class="nav-link" data-scroll-target="#format">Format</a></li>
  </ul></li>
  <li><a href="#typst-preprint-extension-options" id="toc-typst-preprint-extension-options" class="nav-link" data-scroll-target="#typst-preprint-extension-options">Typst &amp; preprint-extension options</a>
  <ul class="collapse">
  <li><a href="#typst-geometry-layout-and-formatting-options" id="toc-typst-geometry-layout-and-formatting-options" class="nav-link" data-scroll-target="#typst-geometry-layout-and-formatting-options">Typst geometry, layout, and formatting options</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#example-content" id="toc-example-content" class="nav-link" data-scroll-target="#example-content">Example content</a>
  <ul class="collapse">
  <li><a href="#heading-level-2" id="toc-heading-level-2" class="nav-link" data-scroll-target="#heading-level-2">Heading level 2</a>
  <ul class="collapse">
  <li><a href="#heading-level-3" id="toc-heading-level-3" class="nav-link" data-scroll-target="#heading-level-3">Heading level 3</a></li>
  </ul></li>
  <li><a href="#floats" id="toc-floats" class="nav-link" data-scroll-target="#floats">Floats</a>
  <ul class="collapse">
  <li><a href="#tables" id="toc-tables" class="nav-link" data-scroll-target="#tables">Tables</a></li>
  <li><a href="#figures" id="toc-figures" class="nav-link" data-scroll-target="#figures">Figures</a></li>
  </ul></li>
  <li><a href="#quarto-markdown-features" id="toc-quarto-markdown-features" class="nav-link" data-scroll-target="#quarto-markdown-features">Quarto markdown features</a>
  <ul class="collapse">
  <li><a href="#maths" id="toc-maths" class="nav-link" data-scroll-target="#maths">Maths</a></li>
  <li><a href="#block-quotes" id="toc-block-quotes" class="nav-link" data-scroll-target="#block-quotes">Block quotes</a></li>
  <li><a href="#callouts" id="toc-callouts" class="nav-link" data-scroll-target="#callouts">Callouts</a></li>
  <li><a href="#code-listings" id="toc-code-listings" class="nav-link" data-scroll-target="#code-listings">Code listings</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#help-contributing" id="toc-help-contributing" class="nav-link" data-scroll-target="#help-contributing">Help &amp; contributing</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="index.pdf"><i class="bi bi-file-pdf"></i>Typst (preprint)</a></li><li><a href="index.docx"><i class="bi bi-file-word"></i>MS Word (preprint)</a></li></ul></div><div class="quarto-other-links"><h2>Other Links</h2><ul><li><a href="https://mvuorre.github.io/quarto-preprint"><i class="bi bi-globe2"></i>Website</a></li><li><a href="https://github.com/mvuorre/quarto-preprint"><i class="bi bi-github"></i>GitHub Repository</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><em>quarto-preprint</em>: A Quarto Typst extension for efficient typesetting of computationally reproducible manuscripts</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author"><a href="https://www.tilburguniversity.edu/staff/m-j-vuorre">Matti Vuorre</a> <a href="mailto:mjvuorre@uvt.nl" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0001-5052-066X" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Tilburg University
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 29, 2024</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    <p><a href="https://quarto.org">Quarto</a> is a “<em>scientific and technical publishing system</em>”, e.g.&nbsp;for computationally reproducible manuscripts. It is both a markup language that extends <a href="https://pandoc.org/">pandoc</a> <a href="https://quarto.org/docs/authoring/markdown-basics.html">markdown</a> and a program that renders Quarto markdown sources to a variety of formats including PDF, MS Word, HTML, presentations, ePub, and many <a href="https://quarto.org/docs/output-formats/all-formats.html">more</a>. The source code can include prose (this text), math (<span class="math inline">\(\sqrt{2}\)</span>), code evaluation (<code>{r} sqrt(2)</code> renders to 1.414), scholarly <a href="https://quarto.org/docs/authoring/front-matter.html">metadata</a>, and more. The look and feel of the output documents can be controlled <a href="https://quarto.org/docs/output-formats/html-basics.html">within</a> the source document, or by using an <a href="https://quarto.org/docs/extensions/">extension</a>. <a href="https://github.com/mvuorre/quarto-preprint"><em>quarto-preprint</em></a> is such an extension, designed to produce neat documents quickly with minimum effort. It is called “<em>quarto-<strong>preprint</strong></em>” because it facilitates multiformat rendering and switching to journal-specific <a href="https://quarto.org/docs/extensions/listing-journals.html">formats</a> by being 100% Quarto standards compliant. It also produces basic MS Word documents to facilitate collaboration and/or further WYSIWYG editing. This document is both the manual and an example document using <code>quarto-preprint</code>.</p>
  </div>
</div>

<div>
  <div class="keywords">
    <div class="block-title">Keywords</div>
    <p>Quarto, Typst, preprints, communication, typesetting, tools</p>
  </div>
</div>

</header>


<section id="preface" class="level1">
<h1>Preface</h1>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You are viewing HTML output of a Quarto document. To see <em>quarto-preprint</em> outputs in <a href="index.pdf">PDF</a> or <a href="index.docx">MS Word</a>, click the links here or in the right side bar.</p>
</div>
</div>
<p>I hope that <em>quarto-preprint</em> could help encourage scholars to think more proactively about the roles that preprints play in the modern scholarly communication landscape <span class="citation" data-cites="severBiomedicalPublishingHistoric2023 syedValuingPreprintsMust2024 moshontzGuidePostingManaging2021 ahmedFutureAcademicPublishing2023">(<a href="#ref-severBiomedicalPublishingHistoric2023" role="doc-biblioref">Sever 2023</a>; <a href="#ref-syedValuingPreprintsMust2024" role="doc-biblioref">Syed 2024</a>; <a href="#ref-moshontzGuidePostingManaging2021" role="doc-biblioref">Moshontz et al. 2021</a>; <a href="#ref-ahmedFutureAcademicPublishing2023" role="doc-biblioref">Ahmed et al. 2023</a>)</span>.</p>
<p>Why might one use the <em>quarto-preprint</em> extension? One, it renders documents from Quarto markdown to PDF using <a href="https://typst.app/docs">Typst</a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, and therefore is very fast in doing so. Typst doesn’t require complicated LaTeX installations and so is practically easier to use than other PDF-producing methods. Typst also simplifies the development and codebase of templates and Quarto formats, and thus makes edits, bug fixes, forks, and new features easier. Second, <em>quarto-preprint</em> aims to be 100% Quarto standards compliant: Users don’t need to adapt their source code in any way when they switch to other formats, such as other journal extensions, or completely different output formats such as HTML<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<p>This document is both the <em>quarto-preprint</em> manual, and an example document making use of it. You can find its Quarto markdown source code <a href="https://github.com/mvuorre/quarto-preprint/blob/main/index.qmd">here</a>. You can view the latest version of the PDF output <a href="https://mvuorre.github.io/quarto-preprint/index.pdf">here</a> (<a href="https://mvuorre.github.io/quarto-preprint/index.docx">MS Word</a>, <a href="https://mvuorre.github.io/quarto-preprint">HTML</a>).</p>
<section id="a-quarto-example" class="level2">
<h2 class="anchored" data-anchor-id="a-quarto-example">A Quarto example</h2>
<p>Here are the contents of a basic Quarto markdown file, called <code>myfile.qmd</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Example preprint</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Matti Vuorre</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">email</span><span class="kw">:</span><span class="at"> mjvuorre@uvt.nl</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">orcid</span><span class="kw">:</span><span class="at"> 0000-0001-5052-066X</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">affiliation</span><span class="kw">:</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">ref</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">affiliations</span><span class="kw">:</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Tilburg University</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">department</span><span class="kw">:</span><span class="at"> Department of Social Psychology</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">bibliography</span><span class="kw">:</span><span class="at"> bibliography.bib</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span><span class="kw">:</span><span class="at"> pdf</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="at">This text will end up in the rendered .html file. Exciting [@r2024]!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This source code renders (e.g.&nbsp;in <a href="https://quarto.org/docs/get-started/authoring/rstudio.html#rendering">RStudio</a> or <a href="https://quarto.org/docs/get-started/authoring/text-editor.html#rendering">CLI</a>) to <a href="#fig-ex" class="quarto-xref">Figure&nbsp;1</a> (left).</p>
<div id="fig-ex" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ex-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="ex.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ex-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: A cropped version of a basic Quarto .pdf document (left) and a <em>preprint</em> Quarto .pdf document (right).
</figcaption>
</figure>
</div>
<p>However, <a href="#fig-ex" class="quarto-xref">Figure&nbsp;1</a> (left) lacks several features that we’ve come to expect from scholarly outputs, such as authors’ affiliations. <em>quarto-preprint</em> includes many such features. Changing <code>format: pdf</code> in the above source code to <code>format: preprint-typst</code> instructs Quarto to use the extension, which produces the PDF document in <a href="#fig-ex" class="quarto-xref">Figure&nbsp;1</a> (right).</p>
<p>That is, <em>quarto-preprint</em> is a Quarto extension that provides a Quarto format called <code>preprint-typst</code>, which formats your Quarto source—which can be prose, code, math, tables, figures, etc.—to a pleasant looking .pdf via Typst.</p>
</section>
</section>
<section id="quarto-preprint-manual" class="level1">
<h1><em>quarto-preprint</em> manual</h1>
<p>The preprint Quarto extension provides functionality through Quarto metadata, some of which is mapped to a Typst template and its variables. Therefore, if you cannot find the information you’re looking for in this manual, consult either the <a href="https://quarto.org/docs/output-formats/typst.html">Quarto</a> or <a href="https://typst.app/docs">Typst</a> documentation.</p>
<p>In the documentation below, we have divided the YAML metadata options to two sections. First are options that are common to most if not all Quarto formats. Second are options specific to the Typst format and the <em>quarto-preprint</em> Typst format extension.</p>
<section id="common-quarto-options" class="level2">
<h2 class="anchored" data-anchor-id="common-quarto-options">Common Quarto options</h2>
<p>The code snippet above showed YAML metadata between triple-dashes. This YAML metadata can be used to control the output such as fonts, authors, whether to include a table of contents, and many more. We list and explain these options, with examples, below in roughly a decreasing order of importance to typical scholarly manuscripts.</p>
<section id="title" class="level3">
<h3 class="anchored" data-anchor-id="title">Title</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"*preprint*: A Quarto Typst extension for computationally reproducible manuscripts"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Title of the manuscript. Required; needs to be in quotation marks only if it includes special characters such as colons. See relevant Quarto <a href="https://quarto.org/docs/output-formats/html-basics.html#overview">documentation</a>.</p>
</section>
<section id="authors-affiliations" class="level3">
<h3 class="anchored" data-anchor-id="authors-affiliations">Authors &amp; affiliations</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Matti Vuorre</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">email</span><span class="kw">:</span><span class="at"> mjvuorre@uvt.nl</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">orcid</span><span class="kw">:</span><span class="at"> 0000-0001-5052-066X</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">url</span><span class="kw">:</span><span class="at"> https://www.tilburguniversity.edu/staff/m-j-vuorre</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">affiliation</span><span class="kw">:</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">ref</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">affiliations</span><span class="kw">:</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Tilburg University</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">department</span><span class="kw">:</span><span class="at"> Department of Social Psychology</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Authors and their affiliations as explained in Quarto’s scholarly writing <a href="https://quarto.org/docs/authoring/front-matter.html">documentation</a>.</p>
<p>A few features are not yet included. The <code>corresponding: true</code> syntax for indicating corresponding authors does not work. To indicate a corresponding author, specify an email for that author (as in above example). The <code>equal-contributor: true</code> option is not yet implemented.</p>
</section>
<section id="abstract-keywords-date" class="level3">
<h3 class="anchored" data-anchor-id="abstract-keywords-date">Abstract, keywords, &amp; date</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">abstract</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  This document and its source code (`manual.qmd`) illustrate uses of various [Quarto](https://quarto.org) &amp; *preprint* extension features, such as weaving R code [@r2024] and prose.</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">keywords</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> list </span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> keywords</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> here</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> but not</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> too many</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">"`r Sys.Date()`"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The document’s abstract can include multiple paragraphs, Markdown, maths, references, and more. A list of keywords and the document’s date can be added. Above example shows how to include the current date using R.</p>
</section>
<section id="citation-information" class="level3">
<h3 class="anchored" data-anchor-id="citation-information">Citation information</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">citation</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> article-journal</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">container-title</span><span class="kw">:</span><span class="at"> </span><span class="st">"PsyArXiv"</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">doi</span><span class="kw">:</span><span class="at"> </span><span class="st">"10.31234/osf.io/z3ejx"</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">url</span><span class="kw">:</span><span class="at"> https://osf.io/preprints/psyarxiv/z3ejx</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This information is used by Quarto to include the document’s citation information to various formats and the document’s metadata. See relevant Quarto <a href="https://quarto.org/docs/authoring/create-citeable-articles.html">documentation</a>.</p>
</section>
<section id="other-common-options" class="level3">
<h3 class="anchored" data-anchor-id="other-common-options">Other common options</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bibliography</span><span class="kw">:</span><span class="at"> bibliography-manual.bib</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">linkcolor</span><span class="kw">:</span><span class="at"> blue</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mainfont</span><span class="kw">:</span><span class="at"> Fira Sans</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">fontsize</span><span class="kw">:</span><span class="at"> 10pt</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">toc_depth</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">toc_title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Contents of the document"</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">code-links</span><span class="kw">:</span><span class="at"> repo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The above shows how to specify a bibliography file, color for links in the document, the main font and its size, table of contents (and its options). The <code>code-links</code> option is useful when the output formats include HTML.</p>
</section>
<section id="format" class="level3">
<h3 class="anchored" data-anchor-id="format">Format</h3>
<p>You can specify one or more formats, and settings specific to them, under the <code>format</code> key. See <a href="https://quarto.org/docs/output-formats/typst.html">here</a> for Quarto’s Typst-specific format options.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">preprint-typst</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">keep-typ</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="typst-preprint-extension-options" class="level2">
<h2 class="anchored" data-anchor-id="typst-preprint-extension-options">Typst &amp; preprint-extension options</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">running-head</span><span class="kw">:</span><span class="at"> </span><span class="st">"*preprint* Quarto extension manual"</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">branding</span><span class="kw">:</span><span class="at"> psyarxiv</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">authornote</span><span class="kw">:</span><span class="at"> This is an example author note.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>running-head</code> should be a text string and is used as the document’s running head.</p>
<p><code>branding</code> adds a specified preprint service’s logo to the document. Currently only “psyarxiv” is a valid value.</p>
<p><code>authornote</code> allows adding information to the footer of the first page.</p>
<section id="typst-geometry-layout-and-formatting-options" class="level3">
<h3 class="anchored" data-anchor-id="typst-geometry-layout-and-formatting-options">Typst geometry, layout, and formatting options</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">leading</span><span class="kw">:</span><span class="at"> 0.6em</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">spacing</span><span class="kw">:</span><span class="at"> 1em</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">section-numbering</span><span class="kw">:</span><span class="at"> none</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">bibliography-title</span><span class="kw">:</span><span class="at"> </span><span class="st">"References"</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">bibliography-style</span><span class="kw">:</span><span class="at"> </span><span class="st">"apa"</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">margin</span><span class="kw">:</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">x</span><span class="kw">:</span><span class="at"> 1cm</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">y</span><span class="kw">:</span><span class="at"> 3cm</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>leading
<ul>
<li>Space between lines of text <a href="https://typst.app/docs/reference/model/par/#parameters-leading" class="uri">https://typst.app/docs/reference/model/par/#parameters-leading</a></li>
</ul></li>
<li>spacing
<ul>
<li>Space between paragraphs <a href="https://typst.app/docs/reference/layout/block/#parameters-spacing" class="uri">https://typst.app/docs/reference/layout/block/#parameters-spacing</a></li>
</ul></li>
<li>section-numbering
<ul>
<li>In Typst format e.g.&nbsp;“1.1”, do not include or leave empty (““) to not number sections.</li>
</ul></li>
<li>first-line-indent
<ul>
<li><a href="https://typst.app/docs/reference/model/par/#parameters-first-line-indent" class="uri">https://typst.app/docs/reference/model/par/#parameters-first-line-indent</a></li>
</ul></li>
<li>margin
<ul>
<li>Page margins <a href="https://typst.app/docs/reference/layout/page/#parameters-margin" class="uri">https://typst.app/docs/reference/layout/page/#parameters-margin</a></li>
</ul></li>
<li>paper
<ul>
<li><a href="https://typst.app/docs/reference/layout/page/#parameters-paper" class="uri">https://typst.app/docs/reference/layout/page/#parameters-paper</a></li>
</ul></li>
<li>lang
<ul>
<li><a href="https://typst.app/docs/reference/text/text/#parameters-lang" class="uri">https://typst.app/docs/reference/text/text/#parameters-lang</a></li>
</ul></li>
<li>region
<ul>
<li><a href="https://typst.app/docs/reference/text/text/#parameters-region" class="uri">https://typst.app/docs/reference/text/text/#parameters-region</a></li>
</ul></li>
<li>bibliography-title: “References”</li>
<li>bibliography-style: “apa”</li>
</ul>
</section>
</section>
</section>
<section id="example-content" class="level1">
<h1>Example content</h1>
<p>Let us first take a look at body text and headings.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Enim sed faucibus turpis in. Nec dui nunc mattis enim ut tellus. Bibendum ut tristique et egestas quis ipsum suspendisse ultrices gravida. Convallis posuere morbi leo urna. Sed velit dignissim sodales ut eu sem integer vitae justo. Convallis posuere morbi leo urna molestie at elementum eu facilisis. Aliquam sem et tortor consequat. Quam viverra orci sagittis eu. Sed arcu non odio euismod lacinia at quis risus sed. Egestas dui id ornare arcu odio ut sem. Lorem ipsum dolor sit amet consectetur.</p>
<section id="heading-level-2" class="level2">
<h2 class="anchored" data-anchor-id="heading-level-2">Heading level 2</h2>
<p>Eget arcu dictum varius duis at. Netus et malesuada fames ac turpis. Pellentesque sit amet porttitor eget. Egestas tellus rutrum tellus pellentesque eu tincidunt tortor. Risus quis varius quam quisque id diam. Vel pretium lectus quam id leo in vitae. Sit amet aliquam id diam maecenas ultricies mi eget mauris. Auctor urna nunc id cursus metus aliquam eleifend. Arcu dictum varius duis at consectetur lorem. Tempus iaculis urna id volutpat lacus laoreet non. Adipiscing elit ut aliquam purus sit amet. At auctor urna nunc id cursus metus aliquam. Pharetra vel turpis nunc eget lorem dolor.</p>
<section id="heading-level-3" class="level3">
<h3 class="anchored" data-anchor-id="heading-level-3">Heading level 3</h3>
<p>Tristique et egestas quis ipsum suspendisse ultrices gravida dictum fusce. Mauris commodo quis imperdiet massa tincidunt nunc pulvinar. Commodo elit at imperdiet dui accumsan sit amet nulla. Consectetur lorem donec massa sapien faucibus. In vitae turpis massa sed elementum tempus egestas sed sed. Aliquam faucibus purus in massa tempor. Dignissim diam quis enim lobortis scelerisque fermentum dui faucibus in. Montes nascetur ridiculus mus mauris vitae ultricies leo. Sociis natoque penatibus et magnis dis parturient montes nascetur.</p>
<section id="heading-level-4" class="level4">
<h4 class="anchored" data-anchor-id="heading-level-4">Heading level 4</h4>
<p>Consectetur libero id faucibus nisl. Consequat interdum varius sit amet mattis vulputate enim. Amet mattis vulputate enim nulla aliquet porttitor lacus luctus. Mauris augue neque gravida in fermentum et sollicitudin ac. Pharetra diam sit amet nisl suscipit adipiscing bibendum est ultricies. Nisi quis eleifend quam adipiscing. Diam ut venenatis tellus in. Dignissim enim sit amet venenatis urna cursus eget. Hac habitasse platea dictumst quisque sagittis. In fermentum et sollicitudin ac orci phasellus egestas tellus rutrum.</p>
<section id="heading-level-5" class="level5">
<h5 class="anchored" data-anchor-id="heading-level-5">Heading level 5</h5>
<p>Aliquam faucibus purus in massa tempor nec feugiat nisl pretium. Malesuada proin libero nunc consequat interdum varius. Vulputate dignissim suspendisse in est. Congue eu consequat ac felis donec et odio pellentesque diam. Viverra justo nec ultrices dui sapien. Faucibus vitae aliquet nec ullamcorper sit amet risus. Metus aliquam eleifend mi in. Risus quis varius quam quisque id diam vel quam. Et malesuada fames ac turpis egestas integer eget aliquet.</p>
</section>
</section>
</section>
</section>
<section id="floats" class="level2">
<h2 class="anchored" data-anchor-id="floats">Floats</h2>
<section id="tables" class="level3">
<h3 class="anchored" data-anchor-id="tables">Tables</h3>
<p>Tables are still the achilles heel of Typst (and any cross-format output, really). However, basic tables are more than possible, and below is an example table produced in R with the tinytable package (<a href="#tbl-example" class="quarto-xref">Table&nbsp;1</a>). Note that some features of tables, such as footnotes, are not yet implemented in Typst / Quarto.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>tinytable<span class="sc">::</span><span class="fu">tt</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(data, <span class="dv">2</span>),</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-example" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Table created with <code>tinytable::tt()</code>
</figcaption>
<div aria-describedby="tbl-example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
 

  
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tinytable_fts17dzp76zz8qe53yyc</title>
    <style>
.table td.tinytable_css_6ourrjs0rdubsf9xpw3l, .table th.tinytable_css_6ourrjs0rdubsf9xpw3l {    border-bottom: solid 0.1em #d3d8dc; }
    </style>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
  

  
    <div class="container">
      <table class="table table-borderless" id="tinytable_fts17dzp76zz8qe53yyc" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col">x</th>
                <th scope="col">y</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>-0.63</td>
                  <td> 1.4</td>
                </tr>
                <tr>
                  <td> 0.18</td>
                  <td>-0.1</td>
                </tr>
        </tbody>
      </table>
    </div>

    <script>
      function styleCell_tinytable_1igxauyyiaf8rn9evusb(i, j, css_id) {
        var table = document.getElementById("tinytable_fts17dzp76zz8qe53yyc");
        table.rows[i].cells[j].classList.add(css_id);
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_fts17dzp76zz8qe53yyc');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_tinytable_1igxauyyiaf8rn9evusb(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_fts17dzp76zz8qe53yyc");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }

window.addEventListener('load', function () { styleCell_tinytable_1igxauyyiaf8rn9evusb(0, 0, 'tinytable_css_6ourrjs0rdubsf9xpw3l') })
window.addEventListener('load', function () { styleCell_tinytable_1igxauyyiaf8rn9evusb(0, 1, 'tinytable_css_6ourrjs0rdubsf9xpw3l') })
    </script>

  


</div>
</div>
</figure>
</div>
</div>
<div class="cell">
<div id="tbl-example2" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-example2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Table created with <code>knitr::kable()</code>
</figcaption>
<div aria-describedby="tbl-example2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">-0.63</td>
<td style="text-align: right;">1.36</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.18</td>
<td style="text-align: right;">-0.10</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="figures" class="level3">
<h3 class="anchored" data-anchor-id="figures">Figures</h3>
<p>Below is an example figure created in R (<a href="#fig-example" class="quarto-xref">Figure&nbsp;2</a>).</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-example" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-example-1.png" class="img-fluid figure-img" width="288">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Example R scatterplot.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="quarto-markdown-features" class="level2">
<h2 class="anchored" data-anchor-id="quarto-markdown-features">Quarto markdown features</h2>
<section id="maths" class="level3">
<h3 class="anchored" data-anchor-id="maths">Maths</h3>
<p>LaTeX math notation is automatically converted to Typst and as such works just fine either inline (<span class="math inline">\(y_i = \alpha + \beta x_i + \epsilon_i\)</span>) or in display mode (<a href="#eq-1" class="quarto-xref">Equation&nbsp;1</a>):</p>
<p><span id="eq-1"><span class="math display">\[
f(x \mid \mu, \sigma^2) = \frac{1}{\sqrt{2\pi \sigma^2}} \exp\left(-\frac{(x-\mu)^2}{2\sigma^2}\right)
\tag{1}\]</span></span></p>
</section>
<section id="block-quotes" class="level3">
<h3 class="anchored" data-anchor-id="block-quotes">Block quotes</h3>
<p>To insert a quote block, prepend a paragraph with <code>&gt;</code>:</p>
<blockquote class="blockquote">
<p>A quote: “<em>Elit ullamcorper dignissim cras tincidunt lobortis feugiat vivamus at.</em>”</p>
</blockquote>
</section>
<section id="callouts" class="level3">
<h3 class="anchored" data-anchor-id="callouts">Callouts</h3>
<p><a href="https://quarto.org/docs/authoring/callouts.html">Callout blocks</a>, such as <a href="#tip-example" class="quarto-xref">Tip&nbsp;1</a>, can be useful for highlighting content, such as one might do in a box that defines key terms, etc.</p>
<div id="tip-example" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip&nbsp;1: All kinds of markup
</div>
</div>
<div class="callout-body-container callout-body">
<pre><code>This is basic markdown: **bold text** &amp; ~subscript~.</code></pre>
<p>This is basic markdown: <strong>bold text</strong> &amp; <sub>subscript</sub>.</p>
</div>
</div>
</section>
<section id="code-listings" class="level3">
<h3 class="anchored" data-anchor-id="code-listings">Code listings</h3>
<p>Code listings can also be cross-referenced (<a href="#lst-r" class="quarto-xref">Listing&nbsp;1</a>).</p>
<div class="cell">
<div id="lst-r" class="r cell-code listing quarto-float quarto-figure quarto-figure-left anchored">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-r-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;1: R code for pRos.
</figcaption>
<div aria-describedby="lst-r-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="lst-r"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="lst-r-1"><a href="#lst-r-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">+</span><span class="dv">1</span></span>
<span id="lst-r-2"><a href="#lst-r-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</figure>
</div>
</div>
</section>
</section>
</section>
<section id="help-contributing" class="level1">
<h1>Help &amp; contributing</h1>
<p>Send your bug reports and pull requests to <a href="https://github.com/mvuorre/quarto-preprint" class="uri">https://github.com/mvuorre/quarto-preprint</a>.</p>

</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-ahmedFutureAcademicPublishing2023" class="csl-entry" role="listitem">
Ahmed, Abubakari, Aceil Al-Khatib, Yap Boum, Humberto Debat, Alonso Gurmendi Dunkelberg, Lisa Janicke Hinchliffe, Frith Jarrad, et al. 2023. <span>“The Future of Academic Publishing.”</span> <em>Nature Human Behaviour</em>, July, 1–6. <a href="https://doi.org/10.1038/s41562-023-01637-2">https://doi.org/10.1038/s41562-023-01637-2</a>.
</div>
<div id="ref-moshontzGuidePostingManaging2021" class="csl-entry" role="listitem">
Moshontz, Hannah, Grace Binion, Haley Walton, Benjamin T. Brown, and Moin Syed. 2021. <span>“A <span>Guide</span> to <span>Posting</span> and <span>Managing Preprints</span>.”</span> <em>Advances in Methods and Practices in Psychological Science</em> 4 (2): 25152459211019948. <a href="https://doi.org/10.1177/25152459211019948">https://doi.org/10.1177/25152459211019948</a>.
</div>
<div id="ref-severBiomedicalPublishingHistoric2023" class="csl-entry" role="listitem">
Sever, Richard. 2023. <span>“Biomedical Publishing: <span>Past</span> Historic, Present Continuous, Future Conditional.”</span> <em>PLOS Biology</em> 21 (10): e3002234. <a href="https://doi.org/10.1371/journal.pbio.3002234">https://doi.org/10.1371/journal.pbio.3002234</a>.
</div>
<div id="ref-syedValuingPreprintsMust2024" class="csl-entry" role="listitem">
Syed, Moin. 2024. <span>“Valuing <span>Preprints Must</span> Be <span>Part</span> of <span>Responsible Research Assessment</span>.”</span> <em>Meta-Psychology</em> 8 (March). <a href="https://doi.org/10.15626/MP.2023.3758">https://doi.org/10.15626/MP.2023.3758</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>“<em><a href="https://typst.app/docs">Typst</a> is a new markup-based typesetting system for the sciences. It is designed to be an alternative both to advanced tools like LaTeX and simpler tools like Word and Google Docs.</em>”<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>There are a few small features that likely won’t show up in other formats, such as <code>branding</code> (see below), but their inclusion or exclusion in the metadata doesn’t impact how sources are rendered to other formats.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@article{vuorre,
  author = {Vuorre, Matti},
  title = {*Quarto-Preprint*: {A} {Quarto} {Typst} Extension for
    Efficient Typesetting of Computationally Reproducible Manuscripts},
  journal = {PsyArXiv},
  date = {},
  url = {example.com},
  doi = {an.example.doi},
  langid = {en},
  abstract = {{[}Quarto{]}(https://quarto.org) is a “*scientific and
    technical publishing system*”, e.g. for computationally reproducible
    manuscripts. It is both a markup language that extends
    {[}pandoc{]}(https://pandoc.org/)
    {[}markdown{]}(https://quarto.org/docs/authoring/markdown-basics.html)
    and a program that renders Quarto markdown sources to a variety of
    formats including PDF, MS Word, HTML, presentations, ePub, and many
    {[}more{]}(https://quarto.org/docs/output-formats/all-formats.html).
    The source code can include prose (this text), math
    (\$\textbackslash sqrt\{2\}\$), code evaluation (`\{\{r\}\} sqrt(2)`
    renders to `\{r\} round(sqrt(2), digits = 3)`), scholarly
    {[}metadata{]}(https://quarto.org/docs/authoring/front-matter.html),
    and more. The look and feel of the output documents can be
    controlled
    {[}within{]}(https://quarto.org/docs/output-formats/html-basics.html)
    the source document, or by using an
    {[}extension{]}(https://quarto.org/docs/extensions/).
    {[}*quarto-preprint*{]}(https://github.com/mvuorre/quarto-preprint)
    is such an extension, designed to produce neat documents quickly
    with minimum effort. It is called “*quarto-\_\_preprint\_\_*”
    because it facilitates multiformat rendering and switching to
    journal-specific
    {[}formats{]}(https://quarto.org/docs/extensions/listing-journals.html)
    by being 100\% Quarto standards compliant. It also produces basic MS
    Word documents to facilitate collaboration and/or further WYSIWYG
    editing. This document is both the manual and an example document
    using `quarto-preprint`.}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-vuorre" class="csl-entry quarto-appendix-citeas" role="listitem">
Vuorre, Matti. n.d. <span>“*Quarto-Preprint*: A Quarto Typst Extension
for Efficient Typesetting of Computationally Reproducible
Manuscripts.”</span> <em>PsyArXiv</em>. <a href="https://doi.org/an.example.doi">https://doi.org/an.example.doi</a>.
</div></div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>